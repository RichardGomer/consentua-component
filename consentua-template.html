<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="consentua-binary-selector.html">
<link rel="import" href="consentua-linear-selector.html">
<dom-module id="consentua-template">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <section>
      
      <h1>[[template.Name]]</h1>

      <!-- purpose groups -->

      <!-- is binary -->
      <template is="dom-if" if="{{isBinary}}">
        <consentua-binary-selector purpose-group="[[template.PurposeGroups]]"></consentua-binary-selector>
      </template>

      <!-- is linear -->
      <template is="dom-if" if="{{isLinear}}">
        <consentua-linear-selector purpose-group="[[template.PurposeGroups]]"></consentua-linear-selector>
      </template>

      <!-- has more than 1 purpose group -->
      <template is="dom-if" if="{{isMixed}}">
        <p>isMixed</p>
      
      </template>
      
    </section>
  </template>
  <script>
    class ConsentuaTemplate extends Polymer.Element {
      static get is() { return 'consentua-template'; }
      static get properties() {
        return {
          template: {
            type: Object,
            notify: true,
            reflectToAttribute: true,
            value: {}
          },
          isBinary: {
            type: Boolean,
            notify: true,
            value: false
          },
          isLinear: {
            type: Boolean,
            notify: true,
            value: false
          },
          isMixed: {
            type: Boolean,
            notify: true,
            value: false
          },
        };
      }
    ready() {
      super.ready();
      console.log("//////");
      console.log("this.template.DisplayType", this.template.DisplayType);
      console.log("this.template.PurposeGroups.length", this.template.PurposeGroups.length);
      if (this.template.PurposeGroups.length > 1) {
        console.log("is mixed");
        // is mixed
        this.isMixed = true;
        this.isLinear = false;
        this.isBinary = false;
      } else if(this.template.DisplayType == 'linear'){
        console.log("is linear");
        // is linear
        this.isLinear = true;
        this.isMixed = false;
        this.isBinary = false;
      } else if(this.template.DisplayType == 'binary'){
        console.log("is binary");
        // is binary
        this.isBinary = true;
        this.isLinear = false;
        this.isMixed = false;
      } else {
        console.error("ploppers");
      }
    }

  }

    // Associate the new class with an element name
    customElements.define(ConsentuaTemplate.is, ConsentuaTemplate);
  </script>
</dom-module>